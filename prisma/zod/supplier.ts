import * as z from "zod"
import { CompleteProduct, relatedProductSchema, CompleteOrder, relatedOrderSchema } from "./index"

export const supplierSchema = z.object({
  /**
   * The unique identifier for the supplier
   * @default {Generated by database}
   */
  id: z.string(),
  email: z.string().max(320, { message: "Email must contain at most 320 character(s)" }).email("Email must be a valid email address"),
  name: z.string().max(120, { message: "Supplier name must contain at most 120 character(s)" }),
  createdAt: z.date(),
  updatedAt: z.date(),
})

export interface CompleteSupplier extends z.infer<typeof supplierSchema> {
  products: CompleteProduct[]
  orders: CompleteOrder[]
}

/**
 * relatedSupplierSchema contains all relations on your model in addition to the scalars
 *
 * NOTE: Lazy required in case of potential circular dependencies within schema
 */
export const relatedSupplierSchema: z.ZodSchema<CompleteSupplier> = z.lazy(() => supplierSchema.extend({
  products: relatedProductSchema.array(),
  orders: relatedOrderSchema.array(),
}))
